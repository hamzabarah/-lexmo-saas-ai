-- FORCE FIX & SEED: Phase 2 Unit 4 (Competitor Analysis)
-- This script does TWO things:
-- 1. Fixes the Schema (Adds missing UNIQUE constraint if needed - safe to run again)
-- 2. Seeds the Content (Lessons 1-7 with Irresistible Design) for UNIT 4

DO $$
DECLARE
  p_id uuid;
  u_id uuid;
  l_id uuid;
  content text;
BEGIN
    -- =================================================================
    -- PART 1: FIX SCHEMA (Constraint) - Just in case
    -- =================================================================
    BEGIN
        -- Remove duplicates if any
        DELETE FROM public.course_modules a 
        USING public.course_modules b 
        WHERE a.id < b.id 
        AND a.phase_id = b.phase_id 
        AND a.module_number = b.module_number;

        -- Add Constraint (if not exists)
        ALTER TABLE public.course_modules
        ADD CONSTRAINT course_modules_phase_id_module_number_key UNIQUE (phase_id, module_number);
    EXCEPTION
        WHEN duplicate_table THEN
            NULL; -- Already exists, ignore
        WHEN others THEN
            RAISE NOTICE 'Schema fix notice: %', SQLERRM;
    END;

    -- =================================================================
    -- PART 2: SEED CONTENT FOR UNIT 4
    -- =================================================================
    
    -- 1. Get Phase 2 ID
    SELECT id INTO p_id FROM public.phases WHERE phase_number = 2;

    -- 2. Upsert Unit 4
    INSERT INTO public.course_modules (phase_id, module_number, title_ar, title_en, badge, is_locked)
    VALUES (p_id, 4, 'ุชุญููู ุงูููุงูุณูู', 'Competitor Analysis', 'SE 04', false)
    ON CONFLICT (phase_id, module_number) DO UPDATE
    SET title_ar = EXCLUDED.title_ar,
        badge = EXCLUDED.badge;

    SELECT id INTO u_id FROM public.course_modules WHERE phase_id = p_id AND module_number = 4;

    -- 3. Clear existing lessons for this unit
    DELETE FROM public.lessons WHERE course_module_id = u_id;

    -- --------------------------------------------------------------------------
    -- LESSON 1: ุชุญุฏูุฏ ุงูููุงูุณูู ุงูุฑุฆูุณููู
    -- --------------------------------------------------------------------------
    content := '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ุจูุงุก ุฎุฑูุทุฉ ุงุณุชุฎุจุงุฑุงุชูุฉ ุดุงููุฉ ูููุงูุณูู ูู ุงูุณูู

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใููุณูุฉ ุงูุชุญููู ุงูุชูุงูุณูใ
"ุงุนุฑู ุนุฏูู ูุงุนุฑู ููุณูุ ูู ูุฆุฉ ูุนุฑูุฉ ูู ุชููุฒู ุฃุจุฏุงู" โ ุณูู ุชุฒู

ูู ุงูุฅููููุฑุณุ ุงูููุงูุณูู ูู **ูุนูููู ูุฌุงูููู** ููุดููู ูู:
- ูุง ููุฌุญ ููุง ููุดู
- ุงููุฌูุงุช ุงูุชู ููููู ุงุณุชุบูุงููุง
- ุงูุงุณุชุฑุงุชูุฌูุงุช ุงูููุซุจุชุฉ

### ใ๐ ุฃููุงุน ุงูููุงูุณูู โ ุงูุชุตููู ุงูุงุณุชุฑุงุชูุฌูใ

**1. ุงููุณุชูู ุงูุฃูู: ุงูููุงูุณูู ุงููุจุงุดุฑูู ๐ด**
- ูุจูุนูู ููุณ ุงูููุชุฌุงุช ูููุณ ุงูุฌูููุฑ.
- **ุงูุฃููููุฉ: ูุตูู**

**2. ุงููุณุชูู ุงูุซุงูู: ุงูููุงูุณูู ุบูุฑ ุงููุจุงุดุฑูู ๐ก**
- ูุญููู ููุณ ุงููุดููุฉ ุจุทุฑููุฉ ูุฎุชููุฉ.
- **ุงูุฃููููุฉ: ูุชูุณุทุฉ**

**3. ุงููุณุชูู ุงูุซุงูุซ: ุงูููุงูุณูู ุงููุญุชูููู ๐ข**
- ุนูุงูุงุช ุชุฌุงุฑูุฉ ูุจูุฑุฉ ูููููุง ุฏุฎูู ุณููู.
- **ุงูุฃููููุฉ: ูุฑุงูุจุฉ**

### ใูููุฌูุฉ ุงูุงูุชุดุงู โ 7 ูููุงุช ุงุณุชุฎุจุงุฑุงุชูุฉใ

**1. Google Search ุงูุงุณุชุฑุงุชูุฌู:**
- ุงุณุชุฎุฏู ุงูุชุตูุญ ุงูุฎูู (Incognito).
- ุงุจุญุซ ุนู: "[ููุชุฌู] + shop", "best [ููุชุฌู] 2024".

**2. Amazon Intelligence:**
- Amazon = ุฃูุจุฑ ูุงุนุฏุฉ ุจูุงูุงุช ุชูุงูุณูุฉ.
- ุงูุธุฑ ููุณู "Customers also bought".

**3. Social Media Mapping:**
- Instagram/TikTok (#ููุชุดู).
- ุฑุงูุจ ูู ูุชุงุจุนูู ุฌูููุฑู.

**4. ุฃุฏูุงุช ุงูุชุฌุณุณ ุงููุชูุฏูุฉ:**
- **SimilarWeb:** ุชุญููู ุชุฑุงููู (ูุฌุงูู/Pro).
- **Shopify Inspector:** ุชุญููู ูุชุงุฌุฑ (ูุฌุงูู).

**5. ุงููุนุงุฑุถ ูุงูุฃุญุฏุงุซ**
**6. ุดุจูุฉ ุงูุนููุงุก:** (ุงุณุฃู ุฌูููุฑู).
**7. Reverse Engineering:** (ุงุดุชุฑู ูู ุงูููุงูุณูู).

### ใ๐ ูุงูุจ ููู ุงูููุงูุณใ
(ุงุณุชุฎุฏู ูุฐุง ุงููููู ูุชูุซูู ุงูููุงูุณูู)
- **ุงูุงุณู ูุงููููุน**
- **ุงูุชูุงุฌุฏ ุงูุฑููู** (M Followers, Engagement)
- **ุงูููุชุฌุงุช ูุงูุฃุณุนุงุฑ** (Best Seller, Price Range)
- **ุงูุชูููู** (ูุณุชูู ุงูุชูุฏูุฏ)

### ใุงููุงุนุฏุฉ ุงูุฐูุจูุฉ: 5-10-20ใ
ุญุฏุฏ ูุฑุงูุจ:
- **5** ููุงูุณูู ูุจุงุดุฑูู (ุชุญููู ุนููู).
- **10** ููุงูุณูู ุบูุฑ ูุจุงุดุฑูู.
- **20** ููุงูุณ ูุญุชูู.

### ใ๐ ูุตูุญุฉ ุฐูุจูุฉใ
**ูุง ุชูุงูุณ ุงูุฌููุน!**
ุฑูุฒ ุนูู 3-5 ููุงูุณูู ุฑุฆูุณููู ููุท. ุงูุชุดุชุช = ุงููุฒููุฉ.

### ใโ๏ธ ุฎุทุฃ ุดุงุฆุนใ
**"ุณุฃุชุฌุงูู ุงูููุงูุณูู ูุฃุฑูุฒ ุนูู ููุณู ููุท!"**
โ ุงูุชุฌุงูู ููุณ ุงุณุชุฑุงุชูุฌูุฉ.
โ ุงููุนู ุจุงูุณูู + ุงูุชุฑููุฒ ุนูู ูููุชู ุงููุฑูุฏุฉ = ุงููุนุงุฏูุฉ ุงูุฑุงุจุญุฉ.

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใ๐ฏ ุงููุชูุฌุฉใ
ูุฏูู ุงูุขู "ุฑุงุฏุงุฑ" ููุดู ุชุญุฑูุงุช ุงูุณูู.

**๐ฐ ุณููุงุฑูู ุงูุฑุจุญ:** ูุนุฑูุฉ ุงูุฎุตู ูู ูุตู ุงููุตุฑ.';

    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, content_ar, order_index, is_locked)
    VALUES (p_id, u_id, 1, 'ุชุญุฏูุฏ ุงูููุงูุณูู ุงูุฑุฆูุณููู', 'Identifying Key Competitors', content, 1, false)
    RETURNING id INTO l_id;
    
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ุญุฏุฏุช 5 ููุงูุณูู ูุจุงุดุฑูู ุฑุฆูุณููู', 1),
    (l_id, 'ุฃูุดุฃุช ููู ุงุณุชุฎุจุงุฑุงุชู ููู ููุงูุณ', 2),
    (l_id, 'ุตููุชูู ุญุณุจ ูุณุชูู ุงูุชูุฏูุฏ', 3),
    (l_id, 'ุฌูุฒุช ูุงุฆูุฉ ุงููุฑุงูุจุฉ ุงูุฃุณุจูุนูุฉ', 4);

    -- --------------------------------------------------------------------------
    -- LESSON 2: ุชุญููู ููุงุท ููุชูู
    -- --------------------------------------------------------------------------
    content := '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ููู ุฃุณุฑุงุฑ ูุฌุงุญ ุงูููุงูุณูู ูุงุณุชุฎูุงุต ุงูุฏุฑูุณ ุงูุงุณุชุฑุงุชูุฌูุฉ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใููุงุฐุง ูุฏุฑุณ ููุงุท ุงูููุฉุใ
"ุงูุญููู ูุชุนูู ูู ุฃุฎุทุงุก ุบูุฑูุ ูุงูุฐูู ูุชุนูู ูู ูุฌุงุญุงุชูู".
ุฏุฑุงุณุฉ ุงูููุงูุณ ุชููุญู ุงุฎุชุตุงุฑุงู ูุณููุงุช ูู ุงูุชุฌุฑุจุฉ.

### ใ๐ฌ ุฅุทุงุฑ ุงูุชุญููู ุงูุดุงูู โ SCOPE Frameworkใ

**S โ Store Experience (ุชุฌุฑุจุฉ ุงููุชุฌุฑ)**
- ุงูุชุตูููุ ุณุฑุนุฉ ุงููููุนุ ุณูููุฉ ุงูุชููู.
- ุตูุญุฉ ุงูููุชุฌ (ุงููุตูุ ุงูุตูุฑุ ุงููุฑุงุฌุนุงุช).
- ุนูููุฉ ุงูุดุฑุงุก (Checkout).

**C โ Content & Communication (ุงููุญุชูู ูุงูุชูุงุตู)**
- ุงุณุชุฑุงุชูุฌูุฉ ุงูุณูุดูุงู ููุฏูุง (ูุนุฏู ุงููุดุฑุ ุงูุชูุงุนู).
- ููุน ุงููุญุชูู ุงููุงุฌุญ (ููุฏููุ ุตูุฑุ ุชุนูููู).
- ูุจุฑุฉ ุงูุตูุช (ุฑุณููุ ูุฏูุฏุ ููุงูู).

**O โ Offer & Pricing (ุงูุนุฑุถ ูุงูุชุณุนูุฑ)**
- ูููู ุงูุชุณุนูุฑ ููุงุฑูุฉ ุจุงูุณูู.
- ุงููููุฉ ุงููุถุงูุฉ (ุดุญู ูุฌุงููุ ุถูุงูุ ูุฏุงูุง).

**P โ Product Quality (ุฌูุฏุฉ ุงูููุชุฌ)**
- ูุงุฐุง ูุญุจ ุงูุนููุงุกุ (ุงูุฑุฃ ุงููุฑุงุฌุนุงุช ุงูุฅูุฌุงุจูุฉ).
- ุงููููุงุช ุงููุชูุฑุฑุฉ ("ุฌูุฏุฉ"ุ "ุณุฑูุน"ุ "ูุณุชุญู").

**E โ Engagement & Trust (ุงูุชูุงุนู ูุงูุซูุฉ)**
- ุนูุงุตุฑ ุงูุซูุฉ (SSLุ ุณูุงุณุฉ ุฅุฑุฌุงุนุ ุทุฑู ุฏูุน).
- ุณุฑุนุฉ ุงูุงุณุชุฌุงุจุฉ ูุฎุฏูุฉ ุงูุนููุงุก.

### ใ๐ ูุตูุญุฉ ุฐูุจูุฉใ
**ููุงุท ููุฉ ุงูููุงูุณ = ุงูุญุฏ ุงูุฃุฏูู ุงููุทููุจ ููู.**
ุฅุฐุง ุงูููุงูุณ ููุฏู ุดุญู ุฎูุงู 3 ุฃูุงูุ ูุฃูุช ุชุญุชุงุฌ 3 ุฃูุงู ุฃู ุฃูู. ูุง ุชูุงูุณ ุจุงูุฃููุ ูุงูุณ ุจุงูุฃูุถู.

### ใโ๏ธ ุฎุทุฃ ุดุงุฆุนใ
**"ุณุฃูุณุฎ ูู ูุง ููุนูู ุงูููุงูุณ ุงููุงุฌุญ!"**
โ ุงููุณุฎ ุงูุฃุนูู = ุนูุงูุฉ ุชุฌุงุฑูุฉ ุจูุง ูููุฉ.
โ ุงููู ููุงุฐุง ููุฌุญุ ุซู ุทููุฑ ูุณุฎุชู ุงููุฑูุฏุฉ.

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใ๐ฏ ุงููุชูุฌุฉใ
ุฃูุช ุชุนุฑู ุงูุขู "ุงูุฎูุทุฉ ุงูุณุฑูุฉ" ููุฌุงุญูู.

**๐ฐ ุณููุงุฑูู ุงูุฑุจุญ:** ุงูุชุนูู ูู ูุฌุงุญุงุชูู ูููุฑ ุนููู ุขูุงู ุงูุฏููุงุฑุงุช ูู ุงูุชุฌุงุฑุจ ุงููุงุดูุฉ.';

    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, content_ar, order_index, is_locked)
    VALUES (p_id, u_id, 2, 'ุชุญููู ููุงุท ููุชูู', 'Analyzing Their Strengths', content, 2, false)
    RETURNING id INTO l_id;
    
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ุญููุช ุชุฌุฑุจุฉ ูุชุฌุฑ 3 ููุงูุณูู ุนูู ุงูุฃูู', 1),
    (l_id, 'ุฏุฑุณุช ุงุณุชุฑุงุชูุฌูุฉ ุงููุญุชูู ูุฏููู', 2),
    (l_id, 'ุณุฌูุช ุฃุจุฑุฒ 3 ููุงุท ููุฉ ููู ููุงูุณ', 3),
    (l_id, 'ุญุฏุฏุช ูุง ุณุฃุทุจูู ูู ูุชุฌุฑู', 4);

    -- --------------------------------------------------------------------------
    -- LESSON 3: ุงูุชุดุงู ููุงุท ุถุนููู
    -- --------------------------------------------------------------------------
    content := '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ุงูุชุดุงู ุงูุซุบุฑุงุช ูุงููุฑุต ุงูุชู ูุชุฑููุง ุงูููุงูุณูู ูู

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใุงูุฐูุจ ุงููุฎูู ูู ุงูุถุนูใ
ููุงุท ุถุนู ุงูููุงูุณูู = ูุฑุตู ุงูุฐูุจูุฉ!
ูู ุดููู ุนููู = ุจุงุจ ูู ูุทุฑูู ุฃุญุฏ.

### ใูููุฌูุฉ Review Mining ุงููุชูุฏูุฉใ
**1. ุงููุตุงุฏุฑ:** Amazon Reviews (ุงูุฃูู)ุ Trustpilotุ Facebook.
**2. ุงูุชูููู:** ุงูุฑุฃ ูุฑุงุฌุนุงุช 1-3 ูุฌูู.
**3. ุงูุชุญููู:** ุตูู ุงูุดูุงูู (ุฌูุฏุฉุ ุดุญูุ ุฎุฏูุฉ ุนููุงุก).

**ุฃูุซุฑ ุงูุดูุงูู ุชูุฑุงุฑุงู = ูุฑุตุชู ุงููุจุฑู.**

### ใุชุญููู ุงููุฌูุงุช ุงูุงุณุชุฑุงุชูุฌูุฉใ
- **ูุฌูุงุช ุงูููุชุฌ:** ุฌูุฏุฉ ุฑุฏูุฆุฉุ ุฎูุงุฑุงุช ูุญุฏูุฏุฉ.
- **ูุฌูุงุช ุงูุฎุฏูุฉ:** ุดุญู ุจุทูุกุ ูุง ุชุชุจุนุ ุฎุฏูุฉ ุณูุฆุฉ.
- **ูุฌูุงุช ุงูุชุฌุฑุจุฉ:** ูููุน ุจุทูุกุ ุตูุฑ ุฑุฏูุฆุฉ.
- **ูุฌูุงุช ุงูุชูุงุตู:** ูุง ูุญุชููุ ูุง ุชูุงุนู.

### ใุชุญููู ุงูุถุนู ุฅูู ููุฒุฉ ุชูุงูุณูุฉใ

| ุถุนู ุงูููุงูุณ | ููุฒุชู ุงูุชูุงูุณูุฉ |
|-------------|-----------------|
| ุดุญู ุจุทูุก (7-14 ููู) | ุดุญู ุณุฑูุน (3-5 ุฃูุงู) |
| ูุง ุชุชุจุน | ุชุชุจุน ูุจุงุดุฑ + SMS |
| ุฌูุฏุฉ ุฑุฏูุฆุฉ | ุถูุงู ุงูุฌูุฏุฉ + ุฅุฑุฌุงุน |
| ุฎุฏูุฉ ุจุทูุฆุฉ | ุฑุฏ ุฎูุงู 2 ุณุงุนุฉ |
| ุตูุฑ ููููุฉ | 10 ุตูุฑ + ููุฏูู 360 |

### ใ๐ ูุตูุญุฉ ุฐูุจูุฉใ
ุงููุฑุตุฉ ุงูุฃูุจุฑ ุนุงุฏุฉ ูู ุฃุจุณุท ุงูุฃุดูุงุก!
ุดุญู ุฃุณุฑุนุ ุฑุฏ ุฃุณุฑุนุ ุชุบููู ุฃุฌูู... ูุง ุชุญุชุงุฌ ุงุฎุชุฑุงุน ุฌุฏูุฏุ ููุท ุชูููุฐ ุฃูุถู.

### ใโ๏ธ ุฎุทุฃ ุดุงุฆุนใ
**"ุงูููุงูุณ ูุจูุฑ ุฌุฏุงูุ ูุง ุฃุณุชุทูุน ููุงูุณุชู!"**
โ ุงูุดุฑูุงุช ุงููุจูุฑุฉ ุจุทูุฆุฉ. ุฃูุช ุฃุณุฑุนุ ุฃูุฑุจ ููุนูููุ ูุฃูุซุฑ ูุฑููุฉ.

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใ๐ฏ ุงููุชูุฌุฉใ
ููุฏ ูุฌุฏุช "ูุฏุฎู" ููุณูู ูุง ูุญุฑุณู ุฃุญุฏ.

**๐ฐ ุณููุงุฑูู ุงูุฑุจุญ:** ุงุณุชุบูุงู ุถุนู ุงูููุงูุณ = ูุณุจ ุนููุงุฆู ุงูุบุงุถุจูู ููุฑุงู.';

    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, content_ar, order_index, is_locked)
    VALUES (p_id, u_id, 3, 'ุงูุชุดุงู ููุงุท ุถุนููู', 'Discovering Weaknesses', content, 3, false)
    RETURNING id INTO l_id;
    
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ูุฑุฃุช 100+ ูุฑุงุฌุนุฉ ูููุงูุณูู ุฑุฆูุณููู', 1),
    (l_id, 'ุตููุช ุงูุดูุงูู ูู ูุฆุงุช', 2),
    (l_id, 'ุญุฏุฏุช ุฃูุจุฑ 5 ููุงุท ุถุนู', 3),
    (l_id, 'ูุถุนุช ุฎุทุฉ ูุงุณุชุบูุงู ูู ููุทุฉ ุถุนู', 4);

    -- --------------------------------------------------------------------------
    -- LESSON 4: ุงูุชุฌุณุณ ุนูู ุฅุนูุงูุงุชูู
    -- --------------------------------------------------------------------------
    content := '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ูุดู ุงุณุชุฑุงุชูุฌูุงุช ุงูุฅุนูุงู ููููุงูุณูู ูุชูููุฑ ุขูุงู ุงูุฏููุงุฑุงุช ูู ุงูุชุฌุงุฑุจ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใูููุฉ ุงูุชุฌุณุณ ุงูุฅุนูุงููใ
ุงูููุงูุณูู ุฏูุนูุง ุซูู ุงูุชุฌุงุฑุจ... ุฃูุช ุชูุทู ุงููุชุงุฆุฌ ูุฌุงูุงู!
ุฅุนูุงู ูุงุฌุญ ููููุงูุณ (ูุดุท > 14 ููู) = ูุตูุฉ ูุฌุฑุจุฉ.

### ใุฃุฏูุงุช ุงูุชุฌุณุณ ุงูุฅุนูุงููใ
1. **Facebook Ad Library (ูุฌุงูู โญ):** ุดุงูุฏ ูู ุฅุนูุงูุงุชูู ุงููุดุทุฉุ ุงููุตูุตุ ุงูุตูุฑ.
2. **TikTok Creative Center (ูุฌุงูู โญ):** Top Ads ูุงูุชุฑูุฏุงุช.
3. **ุฃุฏูุงุช ูุฏููุนุฉ:** AdSpy, Minea (ูููุญุชุฑููู).

### ใุชุญููู ุงูุฅุนูุงู โ ุงููููุฐุฌ ุงููุงููใ
**1. ุงูุนูุตุฑ ุงูุจุตุฑู (Creative):** ุตูุฑุฉ/ููุฏููุ ุงุญุชุฑุงูู/UGCุ ุงูู Hook (ุฃูู 3 ุซูุงูู).
**2. ุงููุต (Copy):** ุงูุทููุ ุงููุดููุฉ/ุงูุญูุ ุงูุนุฑุถุ ุงูู CTA.
**3. ุงูุงุณุชูุฏุงู:** ูู ูุฎุงุทุจ ุงูุฅุนูุงูุ

### ใุฃููุงุท ุงูุฅุนูุงูุงุช ุงููุงุฌุญุฉใ
1. **Problem-Agitate-Solution (PAS):** ูุดููุฉ -> ุฃูู -> ุญู.
2. **Before-After-Bridge (BAB):** ูุจู -> ุจุนุฏ -> ุงูููุชุฌ ุงูุฌุณุฑ.
3. **Social Proof:** ุดูุงุฏุงุช ูุชููููุงุช.
4. **FOMO:** ูุฏุฑุฉ ูุงุณุชุนุฌุงู ("ุขุฎุฑ 47 ูุทุนุฉ").

### ใ๐ ูุตูุญุฉ ุฐูุจูุฉใ
ูุงุชูุณุฎ ุงูุฅุนูุงู ุญุฑููุงู! ุงููู ููุงุฐุง ูุนููุ ุซู ุงุตูุน ูุณุฎุชู ุจุตูุชู ุงูุฎุงุต.

### ใโ๏ธ ุฎุทุฃ ุดุงุฆุนใ
**"ูุฐุง ุงูุฅุนูุงู viralุ ุณุฃูุณุฎู ุจุงูุถุจุท!"**
โ ุงูุฅุนูุงู ุงูููุณูุฎ ูู ูุนูู ูุฃู ุฌูููุฑู ุฑุขู ูุณุจูุงู. ุงุณุชููู ููุง ุชุณุฑู.

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใ๐ฏ ุงููุชูุฌุฉใ
ูุฏูู ุงูุขู "ุฎุฑูุทุฉ ุทุฑูู" ูุญููุงุชู ุงูุฅุนูุงููุฉ ุงููุงุฏูุฉ.

**๐ฐ ุณููุงุฑูู ุงูุฑุจุญ:** ุชูููุฑ ููุฒุงููุฉ ุงูุงุฎุชุจุงุฑ (Testing) = ุฑุจุญ ุตุงูู ุฃุณุฑุน.';

    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, content_ar, order_index, is_locked)
    VALUES (p_id, u_id, 4, 'ุงูุชุฌุณุณ ุนูู ุฅุนูุงูุงุชูู', 'Spying on Ads', content, 4, false)
    RETURNING id INTO l_id;
    
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ุงุณุชุฎุฏูุช Facebook Ad Library ูุชุญููู 10 ุฅุนูุงูุงุช', 1),
    (l_id, 'ุงุณุชุฎุฏูุช TikTok Creative Center', 2),
    (l_id, 'ุญููุช 5 ุฅุนูุงูุงุช ูุงุฌุญุฉ ุจุงูุชูุตูู', 3),
    (l_id, 'ุญุฏุฏุช ุงูุฃููุงุท ุงููุงุฌุญุฉ ูู ููุชุดู', 4),
    (l_id, 'ุฌูุนุช ููุชุจุฉ ุฅููุงู ูู ุฃูุถู ุงูุฅุนูุงูุงุช', 5);

    -- --------------------------------------------------------------------------
    -- LESSON 5: ููู ุงุณุชุฑุงุชูุฌูุงุชูู
    -- --------------------------------------------------------------------------
    content := '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ูู ุดูุฑุฉ ุงูุงุณุชุฑุงุชูุฌูุงุช ุงูุนูููุฉ ููููุงูุณูู ูุงูุชุนูู ูู ููุงุฐุฌ ุฃุนูุงููู

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใูุง ูุฑุงุก ุงูุณุทุญใ
ุงูุฅุนูุงูุงุช ูุงูููุชุฌุงุช = ุงููุดุฑุฉ. ุงูุงุณุชุฑุงุชูุฌูุฉ = ุงูุฌููุฑ.
ููู ูุฌุฐุจุ ููู ูุจูุนุ ููู ูุญุงูุธ ุนูู ุงูุนูููุ

### ใุชุญููู Customer Journey (ุฑุญูุฉ ุงูุนููู)ใ
**ุฃูุถู ุทุฑููุฉ = ูู ุงูุนููู!**
1. ุชุงุจุนููุ ุงุดุชุฑู ูู ุงููุงุฆูุฉ ุงูุจุฑูุฏูุฉ.
2. ุฃุถู ููุณูุฉ ูุงุชุฑููุง (ุฑุงูุจ ุฅููููุงุช ุงูุงุณุชุนุงุฏุฉ).
3. ุงุดุชุฑู ููุชุฌุงู (ุฑุงูุจ ุชุฌุฑุจุฉ ูุง ุจุนุฏ ุงูุดุฑุงุกุ ุงูุชุบูููุ ุงููุชุงุจุนุฉ).

### ใุชุญููู Email Marketingใ
ุณุฌูู ุชุณูุณู ุงูุฅููููุงุช: ุชุฑุญูุจุ ูุตุตุ ุนุฑูุถุ ูุจูุนุงุช.

### ใุชุญููู ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุณุนูุฑใ
- **Premium:** ุฌูุฏุฉ ูุญุตุฑูุฉ.
- **Competitive:** ูููุฉ ูุถุงูุฉ.
- **Penetration:** ุณุนุฑ ููุฎูุถ (ููุฏุฎูู).
- **ุงูุชูุชููุงุช:** Bundlesุ ุงุดุชุฑุงูุงุชุ ุดุญู ูุฌุงูู.

### ใ๐ ูุตูุญุฉ ุฐูุจูุฉใ
**ุฃูุถู ุงุณุชุซูุงุฑ: ุงุดุชุฑู ูู 3-5 ููุงูุณูู!**
50-100โฌ ุชูุดู ูู ุฃุณุฑุงุฑูู ุจุงููุงูู (ุงูุชุบูููุ ุงูุณุฑุนุฉุ ุงูุฌูุฏุฉ). ุฃุฑุฎุต ูู ุฃู ููุฑุณ!

### ใโ๏ธ ุฎุทุฃ ุดุงุฆุนใ
**"ุณุฃููุฏ ุงุณุชุฑุงุชูุฌูุฉ ุงูููุงูุณ ุงููุงุฌุญ ุจุงููุงูู!"**
โ ูุง ูุนูู ููู ูุฏ ูุง ูุนูู ูู (ุงุฎุชูุงู ุงูููุฒุงููุฉุ ุงูุฌูููุฑ). ูููู ุงููุจุงุฏุฆ ููุถุนู.

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใ๐ฏ ุงููุชูุฌุฉใ
ุฃูุช ุชุฑู "ุงููุงุชุฑููุณ" ุงูุฎุงุตุฉ ุจุฃุนูุงููู.

**๐ฐ ุณููุงุฑูู ุงูุฑุจุญ:** ููู ุงูุงุณุชุฑุงุชูุฌูุฉ ูููุญู ุงููุฏุฑุฉ ุนูู ุงูุชูุจุค ูุงูุชููู.';

    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, content_ar, order_index, is_locked)
    VALUES (p_id, u_id, 5, 'ููู ุงุณุชุฑุงุชูุฌูุงุชูู', 'Understanding Strategies', content, 5, false)
    RETURNING id INTO l_id;
    
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ุงุดุชุฑูุช ูู ููุงูุณ ูุงุญุฏ ุนูู ุงูุฃูู (ุฃู ุณุฌูุช ุงูุชุฌุฑุจุฉ ูุงููุฉ)', 1),
    (l_id, 'ูุซูุช ุฑุญูุฉ ุงูุนููู ูู ุงูุจุฏุงูุฉ ููููุงูุฉ', 2),
    (l_id, 'ุญููุช ุงุณุชุฑุงุชูุฌูุฉ Email Marketing', 3),
    (l_id, 'ูููุช ูููุฐุฌ ุงูุชุณุนูุฑ', 4),
    (l_id, 'ุฑุณูุช Business Model Canvas ููููุงูุณ ุงูุฑุฆูุณู', 5);

    -- --------------------------------------------------------------------------
    -- LESSON 6: ุงูุชููู ุนูููู
    -- --------------------------------------------------------------------------
    content := '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ุจูุงุก ุงุณุชุฑุงุชูุฌูุฉ ุชููู ูุงุถุญุฉ ุชุฌุนูู ุงูุฎูุงุฑ ุงูุฃูู ูู ุงูุณูู

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใููุณูุฉ ุงูุชูููใ
"ูุง ุชูุงูุณ ุนูู ุฃู ุชููู ุงูุฃูุถูุ ูุงูุณ ุนูู ุฃู ุชููู ูุฎุชููุงู".

ุงูุชููู ุงูุญูููู ูู:
โ ูููุฉ ูุฑูุฏุฉ.
โ ุชุฌุฑุจุฉ ุงุณุชุซูุงุฆูุฉ.
โ ุงุฑุชุจุงุท ุนุงุทูู.

### ใ3 ุงุณุชุฑุงุชูุฌูุงุช ููุชูููใ
1. **ุงูุชูุงูุฒ (Differentiation):** ูู ูุฎุชููุงู (ุฌูุฏุฉุ ุชุตูููุ ูุตุฉ).
2. **ุงูุชุฑููุฒ (Focus):** ูู ุงูุฃูุถู ูุดุฑูุญุฉ ูุญุฏุฏุฉ (ููุชุด ุฏููู).
3. **ุงูุงุจุชูุงุฑ ูู ุงููููุฉ:** ูุฏู ุดูุฆุงู ุฌุฏูุฏุงู (Bundle ูุฑูุฏุ ุฎุฏูุฉ ุฅุถุงููุฉ).

### ใุจูุงุก Unique Value Proposition (UVP)ใ
**ุงูุตูุบุฉ:**
"ูุญู ูุณุงุนุฏ [ุงูุฌูููุฑ] ุนูู [ุงููุชูุฌุฉ] ูู ุฎูุงู [ุงูุทุฑููุฉ] ุจุฏูู [ุงูุนุงุฆู] ุนูู ุนูุณ [ุงูููุงูุณูู]."

### ใุฎุทุฉ ุงูุชููู โ 10 ูุญุงูุฑใ
ุงุฎุชุฑ 2-3 ููุท ูุชุชููุฒ ูููุง:
1. ุงูููุชุฌ (ุฌูุฏุฉ).
2. ุงูุณุนุฑ/ุงููููุฉ.
3. ุงูุชุฌุฑุจุฉ (ูููุน).
4. ุงูุฎุฏูุฉ (ุณุฑุนุฉ ุงูุฑุฏ).
5. ุงููุญุชูู.
6. ุงูุซูุฉ.
7. ุงูุณุฑุนุฉ (ุดุญู).
8. ุงูุดุฎุตูุฉ (Brand Voice).
9. ุงูุงุจุชูุงุฑ.
10. ุงูููุงุก.

### ใ๐ ูุตูุญุฉ ุฐูุจูุฉใ
ูุงุชุญุงูู ุงูุชููู ูู ูู ุดูุก! ุงุฎุชุฑ ูุนุงุฑูู. ุงูุชููุฒ ุงูุญูููู ูู ุงูุชุฑููุฒ.

### ใโ๏ธ ุฎุทุฃ ุดุงุฆุนใ
**"ุณุฃูุงูุณ ุจุงูุณุนุฑ ุงูุฃุฑุฎุต!"**
โ ุญุฑุจ ุงูุฃุณุนุงุฑ ุฎุงุณุฑุฉ. ูุงูุณ ุจุงููููุฉุ ููุณ ุจุงูุณุนุฑ.

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใ๐ฏ ุงููุชูุฌุฉใ
ุงูุนููุงุก ูุฎุชุงุฑููู ููุณ ูุฃูู ุงูุฃุฑุฎุตุ ุจู ูุฃูู ุงูุฃูุถู ููู.

**๐ฐ ุณููุงุฑูู ุงูุฑุจุญ:** ุงููููุฉ ุงููุชููุฒุฉ = ููุงุก ุงูุนููุงุก + ููุงูุด ุฑุจุญ ุฃุนูู.';

    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, content_ar, order_index, is_locked)
    VALUES (p_id, u_id, 6, 'ุงูุชููู ุนูููู', 'Outperforming Competitors', content, 6, false)
    RETURNING id INTO l_id;
    
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ุงุฎุชุฑุช ุงุณุชุฑุงุชูุฌูุฉ ุงูุชููู (ุชูุงูุฒ/ุชุฑููุฒ/ุงุจุชูุงุฑ)', 1),
    (l_id, 'ูุชุจุช UVP ูุงุถุญ ููููุน', 2),
    (l_id, 'ุญุฏุฏุช 2-3 ูุญุงูุฑ ููุชููู ูููุง', 3),
    (l_id, 'ุฑุณูุช ุฎุฑูุทุฉ ุงูุชููู ุงูุชูุงูุณู', 4),
    (l_id, 'ูุถุนุช ุฎุทุฉ ุนูู ููู 30 ููู', 5);

    -- --------------------------------------------------------------------------
    -- LESSON 7: ุงููุตุงุฏูุฉ ูุน ุงูููุชุด
    -- --------------------------------------------------------------------------
    content := '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ุงูุชุฃูุฏ ูู ุฅุชูุงูู ููู ุงูุชุญููู ุงูุชูุงูุณู ูุงุณุชุนุฏุงุฏู ูููุฑุญูุฉ ุงูุชุงููุฉ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใูุฑุงุฌุนุฉ ุงููุญุฏุฉ 04ใ
ุชุฃูุฏ ุฃูู ุฃุชููุช:
1. ุชุญุฏูุฏ ุงูููุงูุณูู.
2. ุชุญููู ููุงุท ููุชูู ูุถุนููู.
3. ุงูุชุฌุณุณ ุนูู ุฅุนูุงูุงุชูู.
4. ููู ุงุณุชุฑุงุชูุฌูุงุชูู.
5. ุจูุงุก ุงุณุชุฑุงุชูุฌูุฉ ุชูููู.

### ใุงุฎุชุจุงุฑ ุงููุฎุจุฉใ
1. ุงุฐูุฑ 3 ููุงูุณูู ูุจุงุดุฑูู.
2. ูุง ุฃุจุฑุฒ ููุทุฉ ููุฉ ูููุงูุณูุ
3. ูุง ุฃุจุฑุฒ ููุทุฉ ุถุนู ุณุชุณุชุบููุงุ
4. ูุง ููุท ุงูุฅุนูุงู ุงููุงุฌุญุ
5. ูุง ูู UVP ุงูุฎุงุต ุจูุ

### ใุชูููู ุฌุงูุฒูุชูใ
**โ ุฌุงูุฒ ูููุฑุญูุฉ ุงูุชุงููุฉ ุฅุฐุง:**
- ุจููุช ูููุงุช ุงุณุชุฎุจุงุฑุงุชูุฉ ููููุงูุณูู.
- ุญุฏุฏุช ุงููุฑุต ูู ููุงุท ุถุนููู.
- ูุฏูู ููุชุจุฉ ุฅููุงู ููุฅุนูุงูุงุช.
- ูุชุจุช UVP ูุฎุทุฉ ุงูุชููู ุงูุฎุงุตุฉ ุจู.

### ใููุฎุต ุงูุฅูุฌุงุฒุงุชใ
๐ **ุฃูุช ุงูุขู:**
- ูุญูู ุชูุงูุณู ูุญุชุฑู.
- ุฎุจูุฑ ูู ุงุณุชุฎุฑุงุฌ ุงูุฐูุจ ูู ุดูุงูู ุงูุนููุงุก.
- ุฌุงุณูุณ ุฅุนูุงูู ุฐูู.
- ุงุณุชุฑุงุชูุฌู ุฃุนูุงู ูููู ุฎุทุฉ ุชููู.

ุฃูุช ูู ุงูู 5% ุงูุฃูุถู ุงุณุชุนุฏุงุฏุงู! ๐๏ธ

**๐ฐ ุณููุงุฑูู ุงูุฑุจุญ:**
ุชูููุฑ 10,000โฌ+ ูู ุงูุฃููุงู ุงูููุฏุฑุฉ ูู ุชุฌุงุฑุจ ูุงุดูุฉุ ูุจูุงุก ูููู ุชูุงูุณู ููู ูู ุงูููู ุงูุฃูู.

### ใุงูุฎุทูุฉ ุงูุชุงููุฉใ
**โก๏ธ ุงููุญุฏุฉ 05: ุงูุจุญุซ ุนู ุงูููุชุฌ ุงูุฑุงุจุญ ๐ฅ**

### ใุฑุณุงูุฉ ุฃุฎูุฑุฉใ
"ุงูุชุญููู ุงูุชูุงูุณู ุนุงุฏุฉ ูุณุชูุฑุฉ. ูู ูููู ุฎุตูู ุฃูุถูุ ูููุฒ ุฏุงุฆูุงู." โ๏ธ

ุงุณุชูุฑ ูู ุงูุจูุงุก... ุงููุฌุงุญ ูุฑูุจ! ๐

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

### ใ๐ฏ ุงููุชูุฌุฉใ
ุฃูุช ูุงุฆุฏ ูู ุงูุณููุ ููุณุช ูุฌุฑุฏ ุชุงุจุน.

**๐ฐ ุณููุงุฑูู ุงูุฑุจุญ:** ุงูููุงุฏุฉ = ุงูุญุตุฉ ุงูุณูููุฉ ุงูุฃูุจุฑ.';

    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, content_ar, order_index, is_locked)
    VALUES (p_id, u_id, 7, 'ุงููุตุงุฏูุฉ ูุน ุงูููุชุด', 'Validation with Coach', content, 7, false)
    RETURNING id INTO l_id;
    
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ุฃุฌุจุช ุนูู ูู ุฃุณุฆูุฉ ุงูุงุฎุชุจุงุฑ', 1),
    (l_id, 'ุฃูููุช ูุงุฆูุฉ ุงูุชุญูู (20+ ุนูุงูุฉ)', 2),
    (l_id, 'ุฌููุน ูููุงุชู ููุซูุฉ ูููุธูุฉ', 3),
    (l_id, 'ุฃูุง ุฌุงูุฒ ููุจุญุซ ุนู ุงูููุชุฌ ุงูุฑุงุจุญ!', 4);

END $$;
