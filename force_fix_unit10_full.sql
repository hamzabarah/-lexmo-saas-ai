-- Force Fix Unit 10: Optimized Checkout (Standardized Irresistible Design)
-- This script WIPE and RE-SEEDS Unit 10 content with CORRECT SCHEMA.

BEGIN;

DO $$
DECLARE
    p_id UUID;
    cm_id UUID;
    l_id UUID;
BEGIN
    -- 1. Get Phase 2 ID
    SELECT id INTO p_id FROM public.phases WHERE phase_number = 2 LIMIT 1;
    IF p_id IS NULL THEN
        RAISE EXCEPTION 'Phase 2 not found';
    END IF;

    -- 2. Ensure Unit 10 Module Exists (Upsert)
    -- Badge: SE 10, Title: ุงููุญุฏุฉ 10 โ Checkout ูุญุณูู ๐ณ
    INSERT INTO public.course_modules (phase_id, title_ar, title_en, module_number, badge, profit_scenario_ar, is_locked)
    VALUES (
        p_id,
        'ุงููุญุฏุฉ 10 โ Checkout ูุญุณูู ๐ณ',
        'Optimized Checkout',
        10,
        'SE 10',
        'ุชุญุณูู ุนูููุฉ ุงูุฏูุน ูุชุญููู ุฃูุตู ุนุฏุฏ ูู ุงูุฒูุงุฑ ุฅูู ูุดุชุฑูู',
        false
    )
    ON CONFLICT (phase_id, module_number) 
    DO UPDATE SET
        title_ar = EXCLUDED.title_ar,
        title_en = EXCLUDED.title_en,
        badge = EXCLUDED.badge,
        profit_scenario_ar = EXCLUDED.profit_scenario_ar
    RETURNING id INTO cm_id;

    -- 3. Delete existing lessons for this module to ensure clean slate
    DELETE FROM public.lessons WHERE course_module_id = cm_id;

    -- ==============================================================================
    -- Lesson 1: ุชุจุณูุท ุนูููุฉ ุงูุฏูุน
    -- ==============================================================================
    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, order_index, is_locked, content_ar)
    VALUES (
        p_id,
        cm_id,
        1,
        'ุชุจุณูุท ุนูููุฉ ุงูุฏูุน',
        'Simplifying Checkout',
        1,
        false,
        '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ููู ุฑุญูุฉ ุงูุฏูุน ูุชุจุณูุทูุง ูุฃูุตู ุญุฏ ูููู

### ใ๐ ุงููุญุชููใ

#### ุงูุญูููุฉ ุงูุตุงุฏูุฉ ุนู ุงูู Checkout

**๐ ุฅุญุตุงุฆูุงุช ุตุงุฏูุฉ**
*   **70%** ูู ุงูุณูุงุช ุชูุชุฑู ูุจู ุฅุชูุงู ุงูุดุฑุงุก! ๐ฑ
*   **21%** ูุบุงุฏุฑูู ุจุณุจุจ ุนูููุฉ ุฏูุน ูุนูุฏุฉ
*   **17%** ูุง ูุซููู ุจุงููููุน ูุฅุฏุฎุงู ุจูุงูุงุช ุงูุจุทุงูุฉ
*   ูู ุฎุทูุฉ ุฅุถุงููุฉ = ุฎุณุงุฑุฉ **10%** ูู ุงููุดุชุฑูู

> ๐ก **ุชุญุณูู ุงูู Checkout = ุฃูุจุฑ ุนุงุฆุฏ ุนูู ุงูุฌูุฏ!**

#### ุฑุญูุฉ ุงูุฏูุน ุงููุซุงููุฉ โ The Checkout Journey

**โ ุงูุฑุญูุฉ ุงูุทูููุฉ (โ ุชุฌูุจูุง):**
`ุณูุฉ โ ูุนูููุงุช โ ุดุญู โ ุฏูุน โ ูุฑุงุฌุนุฉ โ ุชุฃููุฏ`
**(ุฎุณุฑุช 75% ูู ุงููุดุชุฑูู ุงููุญุชูููู!)**

**โ ุงูุฑุญูุฉ ุงููุซุงููุฉ (โ ุงุนุชูุฏูุง):**
`ุณูุฉ โ ุตูุญุฉ ูุงุญุฏุฉ (ูุนูููุงุช + ุดุญู + ุฏูุน) โ ุชุฃููุฏ`
**(๐ฏ ุถุงุนูุช ูุนุฏู ุงูุชุญููู!)**

---

#### ุฅุนุฏุงุฏุงุช Checkout ูู Shopify

**โ ุงููุตูู ููุฅุนุฏุงุฏุงุช:**
`Settings โ Checkout and accounts`

**โ ุงูุฅุนุฏุงุฏุงุช ุงููุซูู:**

**โ๏ธ CHECKOUT SETTINGS โ ุงูุฅุนุฏุงุฏุงุช ุงููุซุงููุฉ**

*   **๐ง Customer contact:**
    *   โ๏ธ Email
    *   โ Phone number (ุงุฎุชูุงุฑู โ ูุฏ ููุจุนุฏ ุงูุนููุงุก)
*   **๐ค Customer accounts:**
    *   โ **Accounts are optional** โ ุงูุฃูุถู!
    *   โ Accounts are required โ ููููู ุงูุชุญููู 35%!
    *   โ Accounts are disabled
*   **๐ Customer information:**
    *   Full name: โ Require first and last name
    *   Company name: โ Don''t include โ ุฃุจุณุท
    *   Address line 2: โ Optional
    *   Phone number: โ๏ธ Required โ ููุดุญู ูุงูุชูุงุตู
*   **๐ Order processing:**
    *   โ๏ธ Automatically fulfill orders โ ููู Dropshipping
    *   โ๏ธ Automatically archive orders

---

#### ูุงุนุฏุฉ ุงูู 3 ููุฑุงุช
"ูู ุงูุณูุฉ ููุดุฑุงุก ูู 3 ููุฑุงุช ุฃู ุฃูู!"

1.  **ุงูููุฑุฉ 1:** Checkout (ูู ุงูุณูุฉ)
2.  **ุงูููุฑุฉ 2:** ููุก ุงููุนูููุงุช + ุงุฎุชูุงุฑ ุงูุดุญู
3.  **ุงูููุฑุฉ 3:** ุชุฃููุฏ ุงูุฏูุน
    *   ๐ Done!

---

#### Shopify Checkout Extensibility โ ุฎูุงุฑุงุช ูุชูุฏูุฉ

**โ One-Page Checkout (ุตูุญุฉ ูุงุญุฏุฉ):**
Shopify ูุฏุนู ุงูุขู Checkout ูู ุตูุญุฉ ูุงุญุฏุฉ!
*   ููุชูุนูู: `Settings โ Checkout โ Checkout style โ One-page checkout` โ

**โ Shop Pay โ ุงูุณูุงุญ ุงูุณุฑู:**
*   โ ูุญูุธ ูุนูููุงุช ุงูุนููู ุชููุงุฆูุงู
*   โ Checkout ุจููุฑุฉ ูุงุญุฏุฉ ููุนููุงุก ุงูุนุงุฆุฏูู
*   โ ูุฒูุฏ ุงูุชุญููู ุจูุณุจุฉ **50%!**
*   ููุชูุนูู: `Settings โ Payments โ Shopify Payments โ Accelerated checkouts โ Shop Pay` โ๏ธ

---

#### Express Checkout โ ุงูุฏูุน ุงูุณุฑูุน

**โ ุฎูุงุฑุงุช ุงูุฏูุน ุงูุณุฑูุน:**
`[ ๐ฃ Shop Pay ] [ ๐ Apple Pay ] [ G Google Pay ]`
โโโ ุฃู โโโ
`[ ุงูุฏูุน ุจุจุทุงูุฉ ุงูุงุฆุชูุงู ]`

**ููุงุฐุง Express Checkout ูููุ**
*   ุจููุฑุฉ ูุงุญุฏุฉ = ูุง ุฅุฏุฎุงู ุจูุงูุงุช
*   ูุนูููุงุช ูุญููุธุฉ ูุณุจูุงู
*   ุฃุณุฑุน 4x ูู ุงูุฏูุน ุงูุนุงุฏู
*   ูุฒูุฏ ุงูุชุญููู 20-50%!

**โ ููุชูุนูู:**
`Settings โ Payments โ Shopify Payments โ Accelerated checkouts`

---

### ใ๐ ูุตูุญุฉ ุฐูุจูุฉใ
"ูุง ุชูุฌุจุฑ ุงูุนููุงุก ุนูู ุฅูุดุงุก ุญุณุงุจ!"
ูุฐุง ุงูุฎุทุฃ ูุญุฏู ููููู 35% ูู ุงููุจูุนุงุช.
Guest Checkout = ุงููุฒูุฏ ูู ุงููุงู! ๐ฐ

### ใโ๏ธ ุฎุทุฃ ุงููุฎุจุฉ ุชุชุฌูุจูใ
"ุณุฃุทูุจ ูู ุงููุนูููุงุช ููุชุณููู ูุงุญูุงู!"
โ ูู ุญูู ุฅุถุงูู = ุฎุณุงุฑุฉ ุนููุงุก
โ ุงุณุฃู ุงูุญุฏ ุงูุฃุฏูู ููุท: ุงุณูุ ุจุฑูุฏุ ุนููุงูุ ูุงุชู
โ ููููู ุฌูุน ุงููุฒูุฏ ุจุนุฏ ุงูุดุฑุงุก!

### ใโ ูููุฉ ุงูุฏุฑุณใ
*   ูุนููุช One-Page Checkout
*   ุฌุนูุช ุงูุญุณุงุจุงุช ุงุฎุชูุงุฑูุฉ (Optional)
*   ูุนููุช Shop Pay ู Express Checkout
*   ุฃุฒูุช ุงูุญููู ุบูุฑ ุงูุถุฑูุฑูุฉ
'
    ) RETURNING id INTO l_id;

    -- Task for Lesson 1
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ุชูุนูู One-Page Checkout ูุงูุญุณุงุจุงุช ุงูุงุฎุชูุงุฑูุฉ', 1),
    (l_id, 'ุชูุนูู Shop Pay ู Express Checkout', 2);


    -- ==============================================================================
    -- Lesson 2: ุฅุฒุงูุฉ ุงูุงุญุชูุงู
    -- ==============================================================================
    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, order_index, is_locked, content_ar)
    VALUES (
        p_id,
        cm_id,
        2,
        'ุฅุฒุงูุฉ ุงูุงุญุชูุงู',
        'Removing Friction',
        2,
        false,
        '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ุชุญุฏูุฏ ูุฅุฒุงูุฉ ูู ุงูุนูุงุฆู ุงูุชู ุชููุน ุงูุนููู ูู ุฅุชูุงู ุงูุดุฑุงุก

### ใ๐ ุงููุญุชููใ

#### ูุง ูู ุงูุงุญุชูุงู (Friction)ุ
ุงูุงุญุชูุงู = ุฃู ุดูุก ููุจุทุฆ ุฃู ููุนููุฏ ุฃู ููุฑุจู ุงูุนููู

**๐ง ุฃููุงุน ุงูุงุญุชูุงู ูู ุงูู Checkout**
*   **๐ ุงุญุชูุงู ุชููู:** ุจุทุก ุงูุชุญูููุ ุฃุฎุทุงุกุ ูุง ูุนูู ุนูู ุงูููุจุงูู.
*   **๐ ุงุญุชูุงู ูุนุฑูู:** ุฎุทูุงุช ูุซูุฑุฉุ ูุนูููุงุช ุบูุฑ ูุงุถุญุฉ.
*   **๐ ุงุญุชูุงู ุนุงุทูู:** ุฎูู ูู ุงููุตุจุ ุนุฏู ุงูุซูุฉุ ุฑุณูู ุฎููุฉ.
*   **๐ ุงุญุชูุงู ุฌุณุฏู:** ูุชุงุจุฉ ูุซูุฑุฉุ ููุฑุงุช ูุซูุฑุฉ.

---

#### The Friction Audit โ ุชุฏููู ุงูุงุญุชูุงู

**โ ุงุฎุชุจุฑ Checkout ูุนููู:**
1.  ุฃุถู ููุชุฌ ููุณูุฉ
2.  ุงุจุฏุฃ ุนูููุฉ ุงูู Checkout
3.  ุณุฌูู ูู ูุญุธุฉ ุชููู ุฃู ุงูุฒุนุงุฌ.

**๐ FRICTION CHECKLIST**
*   **ูู ุงูุณูุฉ:** ุงูุณุนุฑ ูุงุถุญุ ุงูุดุญู ุธุงูุฑุ ุฒุฑ Checkout ุจุงุฑุฒุ
*   **ูู ุงููุนูููุงุช:** ุงูุญููู ุถุฑูุฑูุฉ ููุทุ Auto-fill ูุนููุ
*   **ูู ุงูุดุญู:** ุงูุฎูุงุฑุงุช ูุงุถุญุฉุ ุงูุฃุณุนุงุฑ ุธุงูุฑุฉุ ุงููุฏุฉ ูุฐููุฑุฉุ
*   **ูู ุงูุฏูุน:** ุฎูุงุฑุงุช ูุงููุฉุ ุนูุงูุงุช ุฃูุงูุ ุงูุฒุฑ ูุงุถุญุ

---

#### ุฅุฒุงูุฉ ุงูุงุญุชูุงู โ ุงูุญููู

**1. ูุง ููุงุฌุขุช ูู ุงูุฃุณุนุงุฑ!**
*   โ ุงูุณูุฉ โฌ49 + ุดุญู โฌ9 + ุฑุณูู โฌ3 = ุตุฏูุฉ!
*   โ ุฃุธูุฑ ุงูุดุญู ูู ุงูุจุฏุงูุฉ ุฃู ุงุฌุนูู ูุฌุงูุงู.

**2. Auto-fill ู Auto-complete**
*   ุชูุนูู ุงูููุก ุงูุชููุงุฆู ููุญููู (Shopify ููุนูู ุชููุงุฆูุงู).

**3. ุฑุณุงุฆู ุฎุทุฃ ูุฏูุฉ**
*   โ "ูุฑุฌู ุฅุฏุฎุงู ุจุฑูุฏ ุตุญูุญ" ุจุฏูุงู ูู "Error 422".

**4. Progress Indicator**
*   ุดุฑูุท ุชูุฏู ููุถุญ ุฃูู ุงูุนููู (โ ุงููุนูููุงุช โโ โก ุงูุดุญู โโ โข ุงูุฏูุน).

**5. ุฎูุงุฑ "ุงูุนูุฏุฉ ูููุชุฌุฑ"**
*   ูุง ุชุญุจุณ ุงูุนููู!

**6. ุญูุธ ุงูุณูุฉ ุชููุงุฆูุงู**
*   ุฅุฐุง ุบุงุฏุฑ ูุนุงุฏุ ุงูุณูุฉ ููุฌูุฏุฉ.

---

#### ุงูููุจุงูู โ ุงูุฃููููุฉ ุงููุตูู
๐ฑ **70%+ ูู ุงูุฒูุงุฑุงุช ูู ุงูููุจุงูู!**

**๐ฑ MOBILE CHECKOUT CHECKLIST**
*   ุงูุฃุฒุฑุงุฑ ูุจูุฑุฉ ุจูุง ูููู ููุฅุตุจุน.
*   ุงูุญููู ุณููุฉ ุงูููุฑ.
*   ุงูููุจูุฑุฏ ุงูููุงุณุจ ูุธูุฑ (ุฑููู ูููุงุชู).
*   ูุง ุชูุฑูุฑ ุฃููู.
*   ุณุฑูุน (ุฃูู ูู 3 ุซูุงูู).

---

### ใ๐ ูุตูุญุฉ ุฐูุจูุฉใ
"ุงุฎุชุจุฑ ุงูู Checkout ูุฌุฏุชู!"
ุฅุฐุง ุงุณุชุทุงุนุช ุฌุฏุชู ุฅุชูุงู ุงูุดุฑุงุก ุจุฏูู ูุณุงุนุฏุฉุ ูุฃูุช ูุฌุญุช ูู ุฅุฒุงูุฉ ุงูุงุญุชูุงู! ๐ตโ

### ใโ๏ธ ุฎุทุฃ ุงููุฎุจุฉ ุชุชุฌูุจูใ
"ุงูู Checkout ุงูุงูุชุฑุงุถู ูุงูู!"
โ ูู ุชุฎุชุจุฑู ูุนููู ุญูููู.
โ ูู ุชุฌุฑุจู ุนูู ุงูููุจุงูู.
โ ุงุดุชุฑู ูู ูุชุฌุฑู ูุฑุฉ ุดูุฑูุงู ุนูู ุงูุฃูู.

### ใโ ูููุฉ ุงูุฏุฑุณใ
*   ุฃุฌุฑูุช Friction Audit ูุงููุงู
*   ุงุฎุชุจุฑุช ุงูู Checkout ุนูู ุงูููุจุงูู
*   ุฃุฒูุช ูู ุงูููุงุฌุขุช ุงูุณุนุฑูุฉ
*   ุชุฃูุฏุช ูู ุณุฑุนุฉ ุงูุตูุญุฉ
'
    ) RETURNING id INTO l_id;

    -- Task for Lesson 2
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ุฅุฌุฑุงุก Friction Audit ูุงุฎุชุจุงุฑ ุงูููุจุงูู', 1);


    -- ==============================================================================
    -- Lesson 3: ุฅุถุงูุฉ ุถูุงูุงุช ูู ุงูู Checkout
    -- ==============================================================================
    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, order_index, is_locked, content_ar)
    VALUES (
        p_id,
        cm_id,
        3,
        'ุฅุถุงูุฉ ุถูุงูุงุช ูู ุงูู Checkout',
        'Adding Trust Badges',
        3,
        false,
        '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ุทูุฃูุฉ ุงูุนููู ูู ูุญุธุฉ ุงููุฑุงุฑ ุงูุญุงุณูุฉ

### ใ๐ ุงููุญุชููใ

#### ูุญุธุฉ ุงูู Checkout โ ุฃูุตู ููู!
ูู ูุฐู ุงููุญุธุฉุ ุงูุนููู ูุณุฃู: "ูู ุณุฃูุฏูุ"ุ "ูู ูุฐุง ูุตุจุ".
ุฃูุช ุจุญุงุฌุฉ ูุชุนุฒูุฒ ุงูุซูุฉ (Trust Reinforcement).

---

#### ุงูุถูุงูุงุช ูู ุงูู Checkout

**1. ุดุงุฑุงุช ุงูุฃูุงู (Security Badges)**
*   ูุฑุจ ุญููู ุงูุจุทุงูุฉ: ๐ ูุนุงููุฉ ูุดูุฑุฉ 256-bit SSL.
*   ุดุนุงุฑุงุช: Norton, McAfee, PCI.

**2. ุถูุงู ุงูุฅุฑุฌุงุน ุงูุจุงุฑุฒ**
*   โฉ๏ธ "ุถูุงู ุงุณุชุฑุฏุงุฏ 30 ููู".
*   "ุบูุฑ ุฑุงุถูุ ุงุณุชุฑุฏ ุฃููุงูู ูุงููุฉ ุจุฏูู ุฃุณุฆูุฉ."

**3. ุถูุงู ุงููุตูู**
*   ๐ฆ "ุถูุงู ุงูุชูุตูู: ูู ูุตู ุทูุจูุ ูุฑุณู ุจุฏููุงู ูุฌุงูุงู."

**4. ุฏุนู ุงูุนููุงุก**
*   ๐ฌ "ุชุญุชุงุฌ ูุณุงุนุฏุฉุ" (ุจุฑูุฏ ุฃู ุดุงุช).

---

#### ููููุฉ ุชุทุจูููุง ูู Shopify

**โ ุงูุทุฑููุฉ 1: ุชุทุจููุงุช (ููุฌููุน)**
*   **Trust Badges Bear** (ูุฌุงูู)
*   **Vitals** (40+ ุฃุฏุงุฉ)
*   **Checkout Plus** (ูููู)

**โ ุงูุทุฑููุฉ 2: ุชุฎุตูุต ุตูุญุฉ ุงูุณูุฉ (ูุฌุงูู)**
*   ุฃุถู ุงูุถูุงูุงุช ูู ุตูุญุฉ ุงูุณูุฉ ูุจู ุงูู Checkout.

**โ ููุฎุต ุงูุทูุจ โ Order Summary**
ุชุฃูุฏ ุฃู ุงูุนููู ูุฑู ุงูุชูููุฑ ุจูุถูุญ:
*   ๐ฐ ููุฑุช โฌ30.00 (37%)!
*   ๐ ุฏูุน ุขูู | โฉ๏ธ ุฅุฑุฌุงุน 30 ููู | ๐ฆ ุดุญู ูุฌุงูู

---

### ใ๐ ูุตูุญุฉ ุฐูุจูุฉใ
ุถูุงู "ุจุฏูู ุฃุณุฆูุฉ" ูุฒูุฏ ุงูุซูุฉ ุฃูุซุฑ ูู ุฃู ุดูุก!
"ุบูุฑ ุฑุงุถูุ ุงุณุชุฑุฏ ุฃููุงูู. ุจุฏูู ุฃุณุฆูุฉ." ูุฐู ุงูุฌููุฉ ุชุฒูู 90% ูู ุงูุฎูู. ๐ก๏ธ

### ใโ๏ธ ุฎุทุฃ ุงููุฎุจุฉ ุชุชุฌูุจูใ
"ุณุฃุถุน ุถูุงูุงุช ูุฒููุฉ!"
โ "ุถูุงู ูุฏู ุงูุญูุงุฉ" ุซู ุชุฑูุถ ุงูุฅุฑุฌุงุน.
โ ุงูุชุจ ููุท ูุง ุชุณุชุทูุน ุชูููุฐู ูุนูุงู. ุงููุตุฏุงููุฉ > ุงููุนูุฏ ุงููุจูุฑุฉ.

### ใโ ูููุฉ ุงูุฏุฑุณใ
*   ุฃุถูุช Trust Badges ูู ุงูุณูุฉ/Checkout
*   ูุชุจุช ุถูุงู ุฅุฑุฌุงุน ูุงุถุญ ููุฑุฆู
*   ุฃุถูุช ูุนูููุงุช ุงูุฏุนู
*   ุชุฃูุฏุช ูู ูุถูุญ ููุฎุต ุงูุทูุจ
'
    ) RETURNING id INTO l_id;

    -- Task for Lesson 3
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ุฅุถุงูุฉ ุดุงุฑุงุช ุงูุซูุฉ ูุถูุงู ุงูุฅุฑุฌุงุน', 1);


    -- ==============================================================================
    -- Lesson 4: Order Bump โ ุฒูุงุฏุฉ ูููุฉ ุงูุทูุจ
    -- ==============================================================================
    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, order_index, is_locked, content_ar)
    VALUES (
        p_id,
        cm_id,
        4,
        'Order Bump โ ุฒูุงุฏุฉ ูููุฉ ุงูุทูุจ',
        'Order Bump & AOV',
        4,
        false,
        '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ุฒูุงุฏุฉ ูุชูุณุท ูููุฉ ุงูุทูุจ (AOV) ุจุฏูู ุฌูุฏ ุฅุถุงูู

### ใ๐ ุงููุญุชููใ

#### ูุง ูู Order Bumpุ
Order Bump = ุนุฑุถ ููุชุฌ ุฅุถุงูู ูู ุตูุญุฉ ุงูู Checkout ุจููุฑุฉ ูุงุญุฏุฉ.
**ููุฑุฉ ูุงุญุฏุฉ = ุฒูุงุฏุฉ 20%+ ูู ูููุฉ ุงูุทูุจ! ๐ฐ**

**๐ง ููุงุฐุง ูู ูุนุงูุ**
1.  ุงูุนููู ูู "ูุถุน ุงูุดุฑุงุก".
2.  ุงููุจูุบ ุตุบูุฑ ูุณุจูุงู.
3.  ูููุฉ ูุงุถุญุฉ ููุฑูุฉ.
4.  ุณูููุฉ ุงูุฅุถุงูุฉ (ููุฑุฉ ูุงุญุฏุฉ).

---

#### ููุงุนุฏ Order Bump ุงููุงุฌุญ

**1. ูููููู ูุง ููุงูุณ**
*   โ ูุณุงุฏุฉ ุฑูุจุฉ โ ุบุทุงุก ุฅุถุงูู.
*   โ ูุณุงุฏุฉ ุฑูุจุฉ โ ูุณุงุฏุฉ ุฃุฎุฑู (ููุงูุณ).

**2. ุณุนุฑ ููุฎูุถ ูุณุจูุงู (ูุงุนุฏุฉ 20-30%)**
*   ูุฌุจ ุฃู ูููู ุณุนุฑู 20-30% ูู ุงูููุชุฌ ุงูุฃุณุงุณู.
*   ูุซุงู: ููุชุฌ โฌ50 โ Bump ุจู โฌ10-15.
*   ุงูุนููู ูููู: "ุขูุ ููุงุฐุง ูุงุ".

**3. ูููุฉ ูุงุถุญุฉ ููุฑูุฉ**
*   โ "ุบุทุงุก ุฅุถุงูู โ ุญูุงูุฉ ูุบุณูู ุณูู".

**4. ุฎุตู ุฎุงุต**
*   "ุฃุถู ุงูุขู ูููุฑ 33%".

---

#### ุฃููุงุฑ Order Bump
*   ๐๏ธ **ุงูููู:** ุบุทุงุก ุฅุถุงููุ ุญููุจุฉ ุณูุฑ.
*   ๐ฑ **ุฅููุชุฑูููุงุช:** ูุงุจู ุดุญูุ ุญุงูุธุฉ.
*   ๐ **ุฌูุงู:** ุญุฌู ุณูุฑุ ุฃุฏุงุฉ ุชุทุจูู.
*   ๐๏ธ **ุฑูุงุถุฉ:** ููุดูุฉุ ูููู ุบุฐุงุฆู ุตุบูุฑ.

#### ุชุทุจููุงุช ููุตู ุจูุง
*   **ReConvert** (โญ ุงูุฃูุถู)
*   **CartHook**
*   **Zipify OCU**

---

### ใ๐ ูุตูุญุฉ ุฐูุจูุฉใ
Order Bump ูู ุฃุณูู ุทุฑููุฉ ูุฒูุงุฏุฉ ุงูุฃุฑุจุงุญ! ูุง ุฅุนูุงูุงุช ุฅุถุงููุฉุ ูุง ุฒูุงุฑ ุฌุฏุฏ... ููุท ุงุณุชุฎุฑุงุฌ ุงููุฒูุฏ ูู ูู ุนููู ููุฌูุฏ. ๐ฐ

### ใโ๏ธ ุฎุทุฃ ุงููุฎุจุฉ ุชุชุฌูุจูใ
"ุณุฃุถูู Order Bump ุบุงูู ุฌุฏุงู!"
โ ุงูุนููู ูุดุนุฑ ุจุงูุถุบุท ููุบุงุฏุฑ ูููุงู!
โ ุงูุชุฒู ุจูุงุนุฏุฉ 20-30%.

### ใโ ูููุฉ ุงูุฏุฑุณใ
*   ุงุฎุชุฑุช ููุชุฌ Order Bump ููุงุณุจ
*   ุงูุณุนุฑ 20-30% ูู ุงูููุชุฌ ุงูุฃุณุงุณู
*   ูุชุจุช ูุต ูููุน ููุนุฑุถ
*   ุซุจูุช ุชุทุจูู Order Bump ููุนููุช ุงูุนุฑุถ
'
    ) RETURNING id INTO l_id;

    -- Task for Lesson 4
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ุชูุนูู Order Bump ุจููุชุฌ ูููู ูุณุนุฑ ููุงุณุจ', 1);


    -- ==============================================================================
    -- Lesson 5: ุชูููู ุงูุชุฎูู ุนู ุงูุณูุฉ
    -- ==============================================================================
    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, order_index, is_locked, content_ar)
    VALUES (
        p_id,
        cm_id,
        5,
        'ุชูููู ุงูุชุฎูู ุนู ุงูุณูุฉ',
        'Reducing Cart Abandonment',
        5,
        false,
        '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ุงุณุชุฑุฏุงุฏ ุงูุณูุงุช ุงููุชุฑููุฉ ูุชุญููููุง ููุจูุนุงุช

### ใ๐ ุงููุญุชููใ

#### ูุจุงุก ุงูุณูุงุช ุงููุชุฑููุฉ
**70% ูู ุงูุณูุงุช ุชูุชุฑู!** ูู ุงุณุชุฑุฏุฏุช 10% ููุทุ ุชุฒูุฏ ูุจูุนุงุชู 7%.

**ุฃุณุจุงุจ ุงูุชุฎูู:** ุชูุงููู ููุงุฌุฆุฉ (48%)ุ ุฅุฌุจุงุฑ ุนูู ุฅูุดุงุก ุญุณุงุจ (26%)ุ ุชุนููุฏ (22%).

---

#### ุงุณุชุฑุงุชูุฌูุฉ ุงุณุชุฑุฏุงุฏ ุงูุณูุงุช โ Cart Recovery

**1. ุฅููููุงุช ุงุณุชุฑุฏุงุฏ ุงูุณูุฉ (Abandoned Cart Emails)**
ุฃููู ุทุฑููุฉ! ูุชูุณุท ุงูุงุณุชุฑุฏุงุฏ 5-15%.

**๐ง ุณูุณูุฉ ุงูุฅููููุงุช ุงููุซุงููุฉ:**
1.  **ุจุนุฏ ุณุงุนุฉ:** "ูุณูุช ุดูุฆุงูุ" (ุชุฐููุฑ ูุฏูุ ูุง ุฎุตู).
2.  **ุจุนุฏ 24 ุณุงุนุฉ:** "ุดุญู ูุฌุงูู!" (ุญุงูุฒ ุตุบูุฑ).
3.  **ุจุนุฏ 72 ุณุงุนุฉ:** "ุขุฎุฑ ูุฑุตุฉ: ุฎุตู 10%" (ุฅูุญุงุญ + ุฎุตู).

**ุฅุนุฏุงุฏูุง:** `Settings โ Notifications โ Checkout โ Abandoned checkout`
ุฃู ุงุณุชุฎุฏู **Klaviyo** (ุงูุฃูุถู).

**2. SMS ูุงุณุชุฑุฏุงุฏ ุงูุณูุฉ**
*   ูุนุฏู ูุชุญ 98%!
*   ูุนุงู ุฌุฏุงู ููููุชุฌุงุช ุงูุฑุฎูุตุฉ.
*   ุชุทุจููุงุช: SMSBump.

**3. Exit Intent Popup**
*   ุนูุฏ ุงููุบุงุฏุฑุฉุ ูุธูุฑ Popup: "ูุญุธุฉ! ุงุญุตู ุนูู 10% ุฎุตู".

**ุชูุชููุงุช ุฅุถุงููุฉ:**
*   ุดุญู ูุฌุงูู ููู ูุจูุบ ูุนูู (Progress Bar).
*   Live Chat ูู ุงูุณูุฉ.

---

### ใ๐ ูุตูุญุฉ ุฐูุจูุฉใ
ุงูุฅูููู ุงูุฃูู ุฎูุงู ุณุงุนุฉ ูู ุงูุฃููู! ูููุง ุทุงู ุงูุงูุชุธุงุฑุ ูููุช ูุฑุตุฉ ุงูุงุณุชุฑุฏุงุฏ.
โฐ ุณุงุนุฉ ูุงุญุฏุฉ = ุฃุนูู ูุนุฏู ุงุณุชุฑุฏุงุฏ.

### ใโ๏ธ ุฎุทุฃ ุงููุฎุจุฉ ุชุชุฌูุจูใ
"ุณุฃุนุทู ุฎุตู 30% ูู ุฃูู ุฅูููู!"
โ ุชุฏุฑูุจ ุงูุนููุงุก ุนูู ุชุฑู ุงูุณูุฉ!
โ ุชุฏุฑุฌ: ุชุฐููุฑ โ ุญุงูุฒ ุตุบูุฑ โ ุฎุตู.

### ใโ ูููุฉ ุงูุฏุฑุณใ
*   ูุนููุช Abandoned Cart Email ูู Shopify
*   ูุชุจุช ุณูุณูุฉ 3 ุฅููููุงุช
*   ุฃุถูุช Exit Intent Popup (ุงุฎุชูุงุฑู)
*   ุฃุถูุช ุดุฑูุท ุงูุดุญู ุงููุฌุงูู
'
    ) RETURNING id INTO l_id;

    -- Task for Lesson 5
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ุฅุนุฏุงุฏ ุณูุณูุฉ ุฅููููุงุช ุงุณุชุฑุฏุงุฏ ุงูุณูุฉ', 1);


    -- ==============================================================================
    -- Lesson 6: ุงุฎุชุจุงุฑ ุนูููุฉ ุงูุดุฑุงุก
    -- ==============================================================================
    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, order_index, is_locked, content_ar)
    VALUES (
        p_id,
        cm_id,
        6,
        'ุงุฎุชุจุงุฑ ุนูููุฉ ุงูุดุฑุงุก',
        'Testing The Checkout',
        6,
        false,
        '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ุงูุชุฃูุฏ ูู ุฃู ุนูููุฉ ุงูุดุฑุงุก ุชุนูู ุจุดูู ูุซุงูู ูุจู ุงูุฅุทูุงู

### ใ๐ ุงููุญุชููใ

#### ููุงุฐุง ุงูุงุฎุชุจุงุฑ ุถุฑูุฑูุ
"ูุชุฌุฑ ูุง ุชุฎุชุจุฑู = ูุชุฌุฑ ูุง ูุจูุน!"
ูุตุต ูุฑุนุจุฉ ุนู ูุชุงุฌุฑ ุฎุณุฑุช ุขูุงู ุงูุฏููุงุฑุงุช ุจุณุจุจ ุฒุฑ ูุง ูุนูู ุฃู ุจูุงุจุฉ ุฏูุน ูุนุทูุฉ.

---

#### ุงูุงุฎุชุจุงุฑ ุงููุงูู โ Full Journey Test

**1. ุฅูุดุงุก ุทูุจ ุชุฌุฑูุจู**
*   `Settings โ Payments โ Test mode`
*   ุฃู ุฃูุดุฆ ููุฏ ุฎุตู 100% (TEST100).

**2. ุงุฎุชุจุฑ ุงูุฑุญูุฉ ูุงููุฉ (Full Checkout Test)**
*   **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:** ุณุฑุนุฉุ ุฑูุงุจุท.
*   **ุงูููุชุฌ:** ุตูุฑุ ูุตูุ ุฒุฑ ุฅุถุงูุฉ ููุณูุฉ.
*   **ุงูุณูุฉ:** ุชุนุฏูู ุงููููุฉุ ุงููุฌููุน ุตุญูุญ.
*   **Checkout:** ุงูุญููู ุชุนููุ ุงูุดุญู ูุธูุฑุ ุงูุฏูุน ูุนูู.
*   **ูุง ุจุนุฏ ุงูุทูุจ:** ุฅูููู ุงูุชุฃููุฏ ูุตู.

**3. ุงุฎุชุจุงุฑ ุงูููุจุงูู (ุงูุฃูู!)**
*   ๐ฑ ุชุฃูุฏ ูู ุญุฌู ุงูุฃุฒุฑุงุฑุ ุงูููุจูุฑุฏุ ุงูุณุฑุนุฉ.

**4. ุงุฎุชุจุงุฑ ุจูุงุจุงุช ุงูุฏูุน**
*   ุงุณุชุฎุฏู ุจุทุงูุงุช ุงูุงุฎุชุจุงุฑ (Test Cards) ููุชุฃูุฏ ูู ูุจูู ูุฑูุถ ุงูุฏูุนุงุช ุจุดูู ุตุญูุญ.

**5. ุงุฎุชุจุงุฑ ุงูุญุงูุงุช ุงูุฎุงุตุฉ (Edge Cases)**
*   ููุฏ ุฎุตูุ ููุชุฌ ููุฏุ ุจูุฏ ูุฎุชูู.

---

### ใ๐ ูุตูุญุฉ ุฐูุจูุฉใ
ุงุนูู ุทูุจ ุญูููู ุจุจุทุงูุชู ุงูุญููููุฉ!
ุงุฏูุนุ ุงุณุชูู ุงูููุชุฌุ ุฌุฑูุจ ุงูุฅุฑุฌุงุน. ูุฐุง ุงูุงุฎุชุจุงุฑ ุงููุญูุฏ ุงูุฐู ูุถูู ุฃู ูู ุดูุก ูุนูู. ๐ณ

### ใโ๏ธ ุฎุทุฃ ุงููุฎุจุฉ ุชุชุฌูุจูใ
"ุงุฎุชุจุฑุช ุนูู ุงูููุจููุชุฑุ ูููู!"
โ 70% ูู ุนููุงุฆู ุนูู ุงูููุจุงูู.
โ ุงุฎุชุจุฑ ุนูู iPhone AND Android.

### ใโ ูููุฉ ุงูุฏุฑุณใ
*   ุฃุฌุฑูุช ุทูุจ ุชุฌุฑูุจู ูุงูู ุนูู ุงูููุจููุชุฑ
*   ุฃุฌุฑูุช ุทูุจ ุชุฌุฑูุจู ุนูู ุงูููุจุงูู
*   ุทูุจุช ูู 2-3 ุฃุดุฎุงุต ุงูุงุฎุชุจุงุฑ
*   ุฃูููุช Pre-Launch Checklist
'
    ) RETURNING id INTO l_id;

    -- Task for Lesson 6
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุดุฑุงุก ูุงูู (Desktop & Mobile)', 1);


    -- ==============================================================================
    -- Lesson 7: ุงููุตุงุฏูุฉ ูุน ุงูููุชุด
    -- ==============================================================================
    INSERT INTO public.lessons (phase_id, course_module_id, module_number, title_ar, title_en, order_index, is_locked, content_ar)
    VALUES (
        p_id,
        cm_id,
        7,
        'ุงููุตุงุฏูุฉ ูุน ุงูููุชุด',
        'Coach Validation',
        7,
        false,
        '### ใ๐ฏ ูุฏู ุงูุฏุฑุณใ
ุงูุชุฃูุฏ ูู ุฌุงูุฒูุฉ ุงูู Checkout ููุฅุทูุงู

### ใ๐ ุงููุญุชููใ

#### ูุฑุงุฌุนุฉ ุงููุญุฏุฉ 10
ูุจู ุงูุงูุชูุงูุ ุชุฃูุฏ ุฃูู ุฃุชููุช:
1.  ุชุจุณูุท ุนูููุฉ ุงูุฏูุน.
2.  ุฅุฒุงูุฉ ุงูุงุญุชูุงู.
3.  ุฅุถุงูุฉ ุงูุถูุงูุงุช.
4.  Order Bump.
5.  Cart Recovery.
6.  ุงุฎุชุจุงุฑ ุงูุนูููุฉ.

#### โ OPTIMIZED CHECKOUT CHECKLIST
*   **ุงูุชุจุณูุท:** One-Page Checkoutุ Guest Checkoutุ Express Pay.
*   **ุงูุงุญุชูุงู:** ุณุฑุนุฉ ุนุงููุฉุ ููุจุงูู ููุชุงุฒุ ูุง ููุงุฌุขุช.
*   **ุงูุถูุงูุงุช:** Trust Badgesุ ุถูุงู ุฅุฑุฌุงุนุ ุฏุนู.
*   **ุงููููุฉ:** Order Bump (20-30%).
*   **ุงูุงุณุชุฑุฏุงุฏ:** Abandoned Cart Emails (3).
*   **ุงูุงุฎุชุจุงุฑ:** ุทูุจ ุชุฌุฑูุจู ูุงุฌุญ.

#### ูุง ุญููุชู:
๐ฐ **ุชุฃุซูุฑ ูุงูู:** ูุถุงุนูุฉ ูุนุฏู ุงูุชุญููู ูุฒูุงุฏุฉ ูููุฉ ุงูุทูุจ (AOV).
ููุณ ุงูุฒูุงุฑ = 3 ุฃุถุนุงู ุงูุฅูุฑุงุฏุงุช!

---

### ใุงูุฎุทูุฉ ุงูุชุงููุฉใ
ุงููุชุฌุฑ ุดุจู ุฌุงูุฒ! ุจุงูู ุงูุตูุญุงุช ุงูุฃุณุงุณูุฉ...
โก๏ธ **ุงููุญุฏุฉ 11: ุงูุตูุญุงุช ุงูุฃุณุงุณูุฉ**.
(ูู ูุญูุ ุงุชุตู ุจูุงุ FAQุ ุงููุงููููุฉ).

๐ **ุชุฐูุฑ:** "Checkout ูู ุญูุซ ูุชุญูู ุงูุฒุงุฆุฑ ุฅูู ุนููู!"

### ใโ ูููุฉ ุงูุฏุฑุณใ
*   ุชูููู ุงูู Checkout ุฐุงุชูุงู ูุงููุตุงุฏูุฉ.
'
    ) RETURNING id INTO l_id;

    -- Task for Lesson 7
    INSERT INTO public.tasks (lesson_id, task_text_ar, order_index) VALUES
    (l_id, 'ุชูููู ุงูู Checkout ุฐุงุชูุงู ูุงููุตุงุฏูุฉ', 1);

END $$;

COMMIT;
